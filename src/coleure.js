(function(){var a=Object.prototype.hasOwnProperty;define("goodies",[],function(){return{getList:function(a,b){var c,d,e,f,g,h,i,j;c=function(c,g){e[a.indexOf(g)]=c;if(++f===d)return b(e)},d=a.length,e=new Array(d),f=0,j=[];for(h=0,i=a.length;h<i;h++)g=a[h],j.push(this.get(g,c));return j},get:function(a,b){var c,d,e=this;c="downloadsInProgress";if(!this.inProgress(c,a,b))return;return d=new XMLHttpRequest,d.open("GET",a),this.listen(d,"readystatechange",function(b){var f,g,h,i;if(d.readyState===4&&d.status===200){e.unlisten(b.target,b.type,arguments.callee),g=e.cache(c,a);for(h=0,i=g.length;h<i;h++)f=g[h],f(d.responseText,a);return e.clearCache(c,a),g.length=0}}),d.send()},json:function(a,b){return this.get(a,function(a){return b(JSON.parse(a))})},merge:function(a,b){var c,d;for(c in b)d=b[c],a[c]=d;return a},async:function(a,b,c){var d,e,f;return f=a[b],e=this.merge,d=Object.keys,a[b]=function(g){var h,i;return d(g).length<c?(i=g,h=arguments.callee,a[b]=function(a){return h(e(a,i))}):(f.call(a,g),a[b]=f)}},cache:function(a,b,c){var d,e;return d=(e=this._cacheData||(this._cacheData={}))[a]||(e[a]={}),c?d[b]=c:d[b]},inProgress:function(a,b,c){var d;return this.cache(a,b)?(d=this.cache(a,b),d[d.length]=c,!1):(this.cache(a,b,[c]),!0)},clearCache:function(a,b){return this._cacheData[a][b]=null},$forEach:Array.prototype.forEach,forEach:function(a,b){return this.$forEach.call(a,b)},$getAttr:Element.prototype.getAttribute,$setAttr:Element.prototype.setAttribute,attr:function(a,b,c,d){var e;return d==null&&(d=!1),e=(c?this.$setAttr:this.$getAttr).call(a,b,c),d&&a.classList.toggle("safariFix"),e},$cls:HTMLHtmlElement.prototype.getElementsByClassName,cls:function(a,b){return b?this.$cls.call(a,b):this.$cls.call(this._documentEl,a)},$tag:HTMLHtmlElement.prototype.getElementsByTagName,tag:function(a,b){return b?this.$tag.call(a,b):(console.log("lole"),this.$tag.call(this._documentEl,a))},$id:document.getElementById,id:function(a){return this.$id.call(this._document,a)},listen:function(a,b,c){return c?a.addEventListener(b,c):this._documentEl.addEventListener(a,b)},unlisten:function(a,b,c){return c?a.removeEventListener(b,c):this._documentEl.removeEventListener(a,b)},remove:function(a){return a.parentNode.removeChild(a)},hide:function(a){return a.style.display="none"},show:function(a,b){return b==null&&(b="block"),a.style.display=b},_document:document,_documentEl:document.documentElement,templateList:function(b,c,d,e){var f,g,h,i,j,k;e==null&&(e=!1),f=0,g=[],i=function(a){var e;e=d[f],e&&(a="with("+e+"){"+a+"}"),g[f]=a;if(++f===b.length)return c(g)},k=[];for(h in b){if(!a.call(b,h))continue;j=b[h],k.push(this.template(j,i,e))}return k},template:function(a,b,c){var d,e,f=this;c==null&&(c=!1),d=c?"bareTemplates":"templates",e=this.cache(d,a);if(e)return b(e);d="templatesInProgress";if(!this.inProgress(d,a,b))return;return this.get(a,function(b){var g,h,i;return b=f._strip(b),i=f._find(b),h=function(){var g,h,i,j;h=f.cache(d,a),e=f._generate(a,b,c);for(i=0,j=h.length;i<j;i++)g=h[i],g(e);return f.clearCache(d,a)},g=function(a){return b=f._apply(b,i.urls,a),h()},i?f.templateList(i.urls,g,i.scopes,!0):h()})},_generate:function(a,b,c){var d,e,f;return f=this._compile(b),d=new Function("var p=[];with(this){"+f+"}return p.join('');"),e=function(a){return d.call(a)},this.cache("templates",a,e),this.cache("bareTemplates",a,f),c?f:e},_apply:function(a,b,c){var d=this;return a.replace(/\{\*\s*([^\s]+).+?\s*\*\}/g,function(a,d){var e;return e=b.indexOf(d),b[e]=null,"{% "+c[e]+" %}"})},_find:function(a){var b,c,d;d=[],c=[],b=0,a.replace(/\{\*\s*([^\s]+)\s+(.+?)?\s*\*\}/g,function(a,e,f){return d[b]=e,c[b]=f,++b});if(b>0)return{urls:d,scopes:c}},_strip:function(a){return a.replace(/[\r\t\n\s]/g," ").replace(/'(?=[^%}]*[%}]\})/g,"	").split("'").join("\\'").split("	").join("'")},_compile:function(a){return("p.push('"+a.replace(/\{\{(.+?)\}\}/g,"',$1,'").split("{%").join("');").split("%}").join("p.push('")+"');").replace(/p\.push\('\s*'\);/g,"")}}})}).call(this),function(){define("colors",["./goodies"],function(a){return{load:function(b){var c=this;return a.async(this,"display",2),a.json(b.colors,function(a){return c.display({colors:a})}),a.template(b.template,function(a){return c.display({template:a})})},display:function(b){var c,d,e,f,g,h;d=b.colors,f=b.template,e="";for(g=0,h=d.length;g<h;g++)c=d[g],e+=f(c);return a.id("colors").innerHTML=e}}})}.call(this),function(){define("inspector",["./goodies"],function(a){return{setup:function(b){var c,d=this;return c=function(a){},a.listen(a.id("colors"),"click",function(a){if(a.target.classList.contains("color"))return d.selectColor(a,b)}),a.listen(a.id("palette_colors"),"click",function(a){if(a.target.classList.contains("color"))return d.selectColor(a,b)}),a.listen(a.id("subjects"),"click",function(a){return d.removeColor(a,b)})},toggleMessage:function(b){var c,d;return d=a.id("welcome-message"),c=a.id("tests"),b?(a.hide(d),a.show(c)):(a.show(d),a.hide(c))},selectColor:function(b,c){var d,e,f,g,h,i,j;return e=b.target,d=a.$getAttr.bind(e),h=a.id("subjects"),g=a.cls("color-preview"),i={name:d("data-name"),hex:d("data-hex"),rgb:d("data-rgb"),hsl:d("data-hsl")},g.length>0&&(b.metaKey||b.ctrlKey)?(g.length===2&&a.remove(g[+!b.shiftKey]),i.firstHex=a.attr(g[0],"data-hex"),f=c.doubleTemplate,j=2):(f=c.singleTemplate,j=1),a.attr(h,"data-subjects",j),this.toggleMessage(!0),a.template(c.previewTemplate,function(a){var b;return b=j===2?h.innerHTML:"",h.innerHTML=b+a(i)}),a.template(f,function(b){return a.id("tests").innerHTML=b(i)})},removeColor:function(b,c){var d,e,f,g;d=b.target;if(!d.classList.contains("close"))return;g=a.cls("color-preview").length-1,a.attr(a.id("subjects"),"data-subjects",g,!0),a.remove(d.parentNode),this.toggleMessage(g!==0),f=a.cls("color-preview")[0];if(!f)return;return e={hex:a.attr(f,"data-hex")},a.template(c.singleTemplate,function(b){return a.id("tests").innerHTML=b(e)})}}})}.call(this),function(){define("palette",["./goodies"],function(a){return{setup:function(b){var c,d,e,f;return f=a.id("palette"),d=a.id("palette_colors"),e=null,c=function(b){var c;return c=b.target,e={name:a.attr(c,"data-name"),hex:a.attr(c,"data-hex"),rgb:a.attr(c,"data-rgb"),hsl:a.attr(c,"data-hsl")},b.dataTransfer.effectAllowed="copy",b.dataTransfer.setData("text","Color added.")},a.listen(a.id("colors"),"dragstart",c),a.listen(a.id("subjects"),"dragstart",c),a.listen(f,"dragover",function(a){return a.preventDefault(),a.dataTransfer.dropEffect="copy",!1}),a.listen(f,"drop",function(c){return a.template(b.template,function(a){var b;return b=document.createElement("i"),d.insertBefore(b,d.firstChild),b.outerHTML=a(e)}),a.hide(a.id("drop-message"))})}}})}.call(this),function(){define("keyboard",["./goodies"],function(a){var b,c,d,e;return e=[],d=[],c=[],b=[],a.listen("keydown",function(a){var f,g;g=String.fromCharCode(a.which),f=e.indexOf(g),f!==-1&&d[f]();if(a.metaKey||a.ctrlKey){f=c.indexOf(g);if(f!==-1)return b[f]()}}),{listen:function(a,b){var c;return c=e.length,e[c]=a,d[c]=b},listenWithCtrl:function(a,d){var e;return e=c.length,c[e]=a,b[e]=d}}})}.call(this),function(){define("settings",[],function(){return{format:"hex"}})}.call(this),function(){define("clipboard",["./keyboard","./settings","./goodies"],function(a,b,c){var d,e,f,g,h,i;return f="color",e=c.id("clipboard_handler"),h=function(a){return c.attr(e,"data-hex",c.attr(a,"data-hex")),c.attr(e,"data-rgb",c.attr(a,"data-rgb")),c.attr(e,"data-hsl",c.attr(a,"data-hsl")),e.value=c.attr(a,"data-"+b.format),e.select()},i=function(a){if(a.target.classList.contains(f))return h(a.target)},c.listen(c.id("colors"),"mouseover",i),c.listen(c.id("panels"),"mouseover",i),d=document.createElement("canvas"),d.height=d.width=16,g=d.getContext("2d"),a.listenWithCtrl("C",function(){var a,b,f,h;a=e.value;if(!a)return;return document.title=""+a+" - Coleure",g.clearRect(0,0,16,16),g.fillStyle="#"+c.attr(e,"data-hex"),g.beginPath(),g.arc(8,8,8,0,Math.PI*2,!0),g.closePath(),g.fill(),f=document.createElement("link"),f.id="dynamic-favicon",f.type="image/x-icon",f.rel="shortcut icon",f.href=d.toDataURL("image/x-icon"),h=c.id("dynamic-favicon"),b=document.head||c.tag("head")[0],h&&b.removeChild(h),b.appendChild(f)})})}.call(this),function(){define("formats",["./settings","./goodies"],function(a,b){var c,d,e;return d=b.cls("set-format"),c=b.id("clipboard_handler"),e=function(e){var f;return f=e.target,a.format=b.attr(f,"id"),b.forEach(d,function(a){return b.attr(a,"data-state","inactive")}),b.attr(f,"data-state","active"),c.value=b.attr(c,"data-"+a.format),c.select()},b.forEach(d,function(a){return b.listen(a,"click",e)})})}.call(this),function(){window.addEventListener("load",function(){return require(["./colors","./inspector","./palette","./clipboard","./formats"],function(a,b,c){return a.load({colors:"src/pantone.json",template:"templates/color.html"}),b.setup({previewTemplate:"templates/preview.html",singleTemplate:"templates/test/single.html",doubleTemplate:"templates/test/double.html"}),c.setup({template:"templates/color.html"})})})}.call(this),define("coleure",function(){})